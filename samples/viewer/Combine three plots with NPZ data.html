<!DOCTYPE html>
<html>
<head>
    <title>Combined three plots with NPZ data (markers, line and line with uncertainty)</title>
    <link rel="stylesheet" type="text/css" href="../../dist/chartViewer.css" />
    <link rel="stylesheet" type="text/css" href="../../dist/idd.css" />
    <!-- bower:css -->
    <!-- endbower -->
    <!-- bower:js -->
    <script src="../../ext/modernizr/modernizr.js"></script>
    <script src="../../ext/jquery/dist/jquery.js"></script>
    <script src="../../ext/rxjs/dist/rx.all.js"></script>
    <script src="../../ext/jqueryui/jquery-ui.js"></script>
    <!-- endbower -->
    <script type="text/javascript" src="http://ecn.dev.virtualearth.net/mapcontrol/mapcontrol.ashx?v=7.0"></script>
    <script type="text/javascript" src="../../dist/idd.js"></script>
    <script type="text/javascript" src="../../dist/chartViewer.js"></script>
    <meta charset="utf-8" />
    <script>
        $(document).ready(function () {
            $.get("data/site.csv", function (data) {
                $.get("data/npz.csv", function (data2) {
                    var x = [];
                    var y = [];
                    var y_median = [];
                    var y_l68 = [];
                    var y_u68 = [];
                    var y_l95 = [];
                    var y_u95 = [];
                  
                    var allTextLines = data.split(/\r\n|\n/);
                    var headers = allTextLines[0].split(',');
                    var allTextLines2 = data2.split(/\r\n|\n/);
                    var headers2 = allTextLines2[0].split(',');

                    for (var i = 1; i < allTextLines.length; i++) {
                        var data1 = allTextLines[i].split(',');
                        if (data1.length == headers.length) {
                            for (var j = 0; j < data1.length; j++) {
                                if (headers[j] == 't') {
                                    x.push(parseFloat(data1[j]));
                                } else if (headers[j] == 'p') {
                                    y.push(parseFloat(data1[j]));
                                }
                            }
                        }
                    }
                    for (var i = 1; i < allTextLines2.length; i++) {
                        var data1 = allTextLines2[i].split(',');
                        if (data1.length == headers2.length) {
                            for (var j = 0; j < data1.length; j++) {
                                if (headers2[j] == 'p_median') y_median.push(parseFloat(data1[j]));
                                if (headers2[j] == 'p_lb95') y_l95.push(parseFloat(data1[j]));
                                if (headers2[j] == 'p_ub95') y_u95.push(parseFloat(data1[j]));
                                if (headers2[j] == 'p_lb68') y_l68.push(parseFloat(data1[j]));
                                if (headers2[j] == 'p_ub68') y_u68.push(parseFloat(data1[j]));
                            }
                        }
                    }
                    
                    ChartViewer.show(document.getElementById("chart"), {
                        "line1": Plot.line({x: x, y: y, stroke: "#7F7F7F"}),
                        "markers": Plot.markers({ x: x, y: y, shape: "triangle", color: "#C0504D" }),
                        "line2": Plot.line({ x: x, y: { median: y_median, lower68: y_l68, upper68: y_u68, lower95: y_l95, upper95: y_u95 }, fill68: '#2E5894', fill95: '#6D9BC3' })
                    });
                });
            });
        });
    </script>
</head>
<body>
    <div id="chart" style="width:100%; height:100%"></div>
</body>
</html>
